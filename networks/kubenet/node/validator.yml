---
- hosts: tag_Name_*s1_validator_ec2_1
  remote_user: ec2-user
  become: yes
  become_method: sudo
  become_flags: "-i"
  become_user: root
  vars:
    REBUILD: "TRUE"
    INIT: "TRUE"
  environment:
    DEPLOY_MODE: qa
  tasks:
  - name: Prepare directories
    file:
      path: /server/bnbchaind/validator
      state: directory
      mode: 0755
  - name: Copy config files
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/kubenode0
      dest: /server/bnbchaind/validator
    when:
    - REBUILD == "TRUE"
  - name: Copy bnbchaind
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/bnbchaind
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Copy bnbcli
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/bnbcli
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Copy run script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//start.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Rename
    command: "{{item}}"
    with_items:
    - rm -rf /server/bnbchaind/validator/node
    - mv /server/bnbchaind/validator/kubenode0 /server/bnbchaind/validator/node
    when:
    - REBUILD == "TRUE"
  - name: Copy service bnbchaind
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbchaind.service
      dest: /usr/lib/systemd/system/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbcli
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbcli.service
      dest: /usr/lib/systemd/system/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbchaind script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//chaind.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbcli script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbcli.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Run bnc
    command: /bin/sh /server/bnbchaind/validator/start.sh


- hosts: tag_Name_*s1_validator_ec2_2
  remote_user: ec2-user
  become: yes
  become_method: sudo
  become_flags: "-i"
  become_user: root
  vars:
    REBUILD: "TRUE"
    INIT: "TRUE"
  environment:
    DEPLOY_MODE: qa
  tasks:
  - name: Prepare directories
    file:
      path: /server/bnbchaind/validator
      state: directory
      mode: 0755
  - name: Copy config files
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/kubenode1
      dest: /server/bnbchaind/validator
    when:
    - REBUILD == "TRUE"
  - name: Copy bnbchaind
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/bnbchaind
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Copy bnbcli
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/bnbcli
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Copy run script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//start.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Rename
    command: "{{item}}"
    with_items:
    - rm -rf /server/bnbchaind/validator/node
    - mv /server/bnbchaind/validator/kubenode1 /server/bnbchaind/validator/node
    when:
    - REBUILD == "TRUE"
  - name: Copy service bnbchaind
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbchaind.service
      dest: /usr/lib/systemd/system/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbcli
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbcli.service
      dest: /usr/lib/systemd/system/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbchaind script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//chaind.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbcli script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbcli.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Run bnc
    command: /bin/sh /server/bnbchaind/validator/start.sh


- hosts: tag_Name_*s1_validator_ec2_3
  remote_user: ec2-user
  become: yes
  become_method: sudo
  become_flags: "-i"
  become_user: root
  vars:
    REBUILD: "TRUE"
    INIT: "TRUE"
  environment:
    DEPLOY_MODE: qa
  tasks:
  - name: Prepare directories
    file:
      path: /server/bnbchaind/validator
      state: directory
      mode: 0755
  - name: Copy config files
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/kubenode2
      dest: /server/bnbchaind/validator
    when:
    - REBUILD == "TRUE"
  - name: Copy bnbchaind
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/bnbchaind
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Copy bnbcli
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/bnbcli
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Copy run script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//start.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Rename
    command: "{{item}}"
    with_items:
    - rm -rf /server/bnbchaind/validator/node
    - mv /server/bnbchaind/validator/kubenode2 /server/bnbchaind/validator/node
    when:
    - REBUILD == "TRUE"
  - name: Copy service bnbchaind
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbchaind.service
      dest: /usr/lib/systemd/system/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbcli
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbcli.service
      dest: /usr/lib/systemd/system/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbchaind script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//chaind.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbcli script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbcli.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Run bnc
    command: /bin/sh /server/bnbchaind/validator/start.sh

- hosts: tag_Name_*s4_validator_ec2_1
  remote_user: ec2-user
  become: yes
  become_method: sudo
  become_flags: "-i"
  become_user: root
  vars:
    REBUILD: "TRUE"
    INIT: "TRUE"
  environment:
    DEPLOY_MODE: qa
  tasks:
  - name: Prepare directories
    file:
      path: /server/bnbchaind/validator
      state: directory
      mode: 0755
  - name: Copy config files
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/kubenode3
      dest: /server/bnbchaind/validator
    when:
    - REBUILD == "TRUE"
  - name: Copy bnbchaind
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/bnbchaind
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Copy bnbcli
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/bnbcli
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Copy run script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//start.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Rename
    command: "{{item}}"
    with_items:
    - rm -rf /server/bnbchaind/validator/node
    - mv /server/bnbchaind/validator/kubenode3 /server/bnbchaind/validator/node
    when:
    - REBUILD == "TRUE"
  - name: Copy service bnbchaind
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbchaind.service
      dest: /usr/lib/systemd/system/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbcli
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbcli.service
      dest: /usr/lib/systemd/system/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbchaind script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//chaind.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbcli script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbcli.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Run bnc
    command: /bin/sh /server/bnbchaind/validator/start.sh


- hosts: tag_Name_*s4_validator_ec2_2
  remote_user: ec2-user
  become: yes
  become_method: sudo
  become_flags: "-i"
  become_user: root
  vars:
    REBUILD: "TRUE"
    INIT: "TRUE"
  environment:
    DEPLOY_MODE: qa
  tasks:
  - name: Prepare directories
    file:
      path: /server/bnbchaind/validator
      state: directory
      mode: 0755
  - name: Copy config files
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/kubenode4
      dest: /server/bnbchaind/validator
    when:
    - REBUILD == "TRUE"
  - name: Copy bnbchaind
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/bnbchaind
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Copy bnbcli
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/bnbcli
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Copy run script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//start.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Rename
    command: "{{item}}"
    with_items:
    - rm -rf /server/bnbchaind/validator/node
    - mv /server/bnbchaind/validator/kubenode4 /server/bnbchaind/validator/node
    when:
    - REBUILD == "TRUE"
  - name: Copy service bnbchaind
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbchaind.service
      dest: /usr/lib/systemd/system/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbcli
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbcli.service
      dest: /usr/lib/systemd/system/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbchaind script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//chaind.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbcli script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbcli.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Run bnc
    command: /bin/sh /server/bnbchaind/validator/start.sh

- hosts: tag_Name_*s4_validator_ec2_3
  remote_user: ec2-user
  become: yes
  become_method: sudo
  become_flags: "-i"
  become_user: root
  vars:
    REBUILD: "TRUE"
    INIT: "TRUE"
  environment:
    DEPLOY_MODE: qa
  tasks:
  - name: Prepare directories
    file:
      path: /server/bnbchaind/validator
      state: directory
      mode: 0755
  - name: Copy config files
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/kubenode5
      dest: /server/bnbchaind/validator
    when:
    - REBUILD == "TRUE"
  - name: Copy bnbchaind
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/bnbchaind
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Copy bnbcli
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/bnbcli
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Copy run script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//start.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Rename
    command: "{{item}}"
    with_items:
    - rm -rf /server/bnbchaind/validator/node
    - mv /server/bnbchaind/validator/kubenode5 /server/bnbchaind/validator/node
    when:
    - REBUILD == "TRUE"
  - name: Copy service bnbchaind
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbchaind.service
      dest: /usr/lib/systemd/system/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbcli
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbcli.service
      dest: /usr/lib/systemd/system/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbchaind script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//chaind.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbcli script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbcli.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Run bnc
    command: /bin/sh /server/bnbchaind/validator/start.sh

- hosts: tag_Name_*s6_validator_ec2_1
  remote_user: ec2-user
  become: yes
  become_method: sudo
  become_flags: "-i"
  become_user: root
  vars:
    REBUILD: "TRUE"
    INIT: "TRUE"
  environment:
    DEPLOY_MODE: qa
  tasks:
  - name: Prepare directories
    file:
      path: /server/bnbchaind/validator
      state: directory
      mode: 0755
  - name: Copy config files
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/kubenode6
      dest: /server/bnbchaind/validator
    when:
    - REBUILD == "TRUE"
  - name: Copy bnbchaind
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/bnbchaind
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Copy bnbcli
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/bnbcli
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Copy run script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//start.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Rename
    command: "{{item}}"
    with_items:
    - rm -rf /server/bnbchaind/validator/node
    - mv /server/bnbchaind/validator/kubenode6 /server/bnbchaind/validator/node
    when:
    - REBUILD == "TRUE"
  - name: Copy service bnbchaind
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbchaind.service
      dest: /usr/lib/systemd/system/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbcli
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbcli.service
      dest: /usr/lib/systemd/system/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbchaind script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//chaind.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbcli script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbcli.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Run bnc
    command: /bin/sh /server/bnbchaind/validator/start.sh


- hosts: tag_Name_*s6_validator_ec2_2
  remote_user: ec2-user
  become: yes
  become_method: sudo
  become_flags: "-i"
  become_user: root
  vars:
    REBUILD: "TRUE"
    INIT: "TRUE"
  environment:
    DEPLOY_MODE: qa
  tasks:
  - name: Prepare directories
    file:
      path: /server/bnbchaind/validator
      state: directory
      mode: 0755
  - name: Copy config files
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/kubenode7
      dest: /server/bnbchaind/validator
    when:
    - REBUILD == "TRUE"
  - name: Copy bnbchaind
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/bnbchaind
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Copy bnbcli
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/bnbcli
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Copy run script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//start.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Rename
    command: "{{item}}"
    with_items:
    - rm -rf /server/bnbchaind/validator/node
    - mv /server/bnbchaind/validator/kubenode7 /server/bnbchaind/validator/node
    when:
    - REBUILD == "TRUE"
  - name: Copy service bnbchaind
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbchaind.service
      dest: /usr/lib/systemd/system/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbcli
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbcli.service
      dest: /usr/lib/systemd/system/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbchaind script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//chaind.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbcli script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbcli.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Run bnc
    command: /bin/sh /server/bnbchaind/validator/start.sh


- hosts: tag_Name_*s6_validator_ec2_3
  remote_user: ec2-user
  become: yes
  become_method: sudo
  become_flags: "-i"
  become_user: root
  vars:
    REBUILD: "TRUE"
    INIT: "TRUE"
  environment:
    DEPLOY_MODE: qa
  tasks:
  - name: Prepare directories
    file:
      path: /server/bnbchaind/validator
      state: directory
      mode: 0755
  - name: Copy config files
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/kubenode8
      dest: /server/bnbchaind/validator
    when:
    - REBUILD == "TRUE"
  - name: Copy bnbchaind
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/bnbchaind
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Copy bnbcli
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/../../build/bnbcli
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Copy run script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//start.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
  - name: Rename
    command: "{{item}}"
    with_items:
    - rm -rf /server/bnbchaind/validator/node
    - mv /server/bnbchaind/validator/kubenode8 /server/bnbchaind/validator/node
    when:
    - REBUILD == "TRUE"
  - name: Copy service bnbchaind
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbchaind.service
      dest: /usr/lib/systemd/system/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbcli
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbcli.service
      dest: /usr/lib/systemd/system/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbchaind script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//chaind.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Copy service bnbcli script
    copy:
      src: /root/zjubfd/src/github.com/BiJie/BinanceChain/networks/kubenet/node//bnbcli.sh
      dest: /server/bnbchaind/validator/
      mode: 0777
    when:
    - INIT == "TRUE"
  - name: Run bnc
    command: /bin/sh /server/bnbchaind/validator/start.sh
